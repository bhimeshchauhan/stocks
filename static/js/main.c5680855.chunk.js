(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{290:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(65),c=a.n(s),o=(a(75),a(6)),l=a(7),i=a(9),d=a(8),u=a(10),m=(a(77),a(79),a(66)),p=a(41),h=a(67),k=a.n(h),b=function(e){function t(){var e,a;Object(o.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(n)))).getStockValueColor=function(e){return e.current_value<e.history.slice(-2)[0].value?"red":e.current_value>e.history.slice(-2)[0].value?"green":null},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.stock_data.history;return n.a.createElement("tr",{className:this.props.stock_data.is_selected?"selected":null,id:this.props.stock_name,onClick:this.props.toggleStockSelection.bind(this,this.props.stock_name)},n.a.createElement("td",null,this.props.stock_name.toUpperCase()),n.a.createElement("td",{className:this.getStockValueColor(this.props.stock_data)},this.props.stock_data.current_value.toFixed(2)),n.a.createElement("td",null,n.a.createElement(p.Sparklines,{data:e.map(function(e){return e.value})},n.a.createElement(p.SparklinesLine,{color:"blue"}))),n.a.createElement("td",{className:"updated_at"},n.a.createElement(k.a,{date:e.slice(-1)[0].time})))}}]),t}(n.a.Component),f=function(e){function t(){var e,a;Object(o.a)(this,t);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(s)))).getArrow=function(){return"up"===a.props.current_trend?n.a.createElement("span",{className:"up-arrow"},"\u21e7"):"down"===a.props.current_trend?n.a.createElement("span",{className:"down-arrow"},"\u21e9"):"-"},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return n.a.createElement("span",{title:"Market trend",className:"icon market-trend"},this.getArrow())}}]),t}(n.a.Component),g=function(e){return n.a.createElement("div",{className:"card column is-one-third",id:"stocks_list"},n.a.createElement("div",{className:"card-header"},n.a.createElement("div",{className:"card-header-title"},"Stocks \xa0",n.a.createElement(m.Detector,{render:function(e){var t=e.online;return n.a.createElement("span",{className:t?"tag is-success":"tag is-danger"},t?"Live":"Offline")}}),"\xa0",n.a.createElement("button",{className:"button is-small",onClick:e.resetData},"Clear history"))),n.a.createElement("div",{className:"card-content"},e.areStocksLoaded()?n.a.createElement("p",{className:"is-size-7 has-text-info"},"Click on a stock to select/unselect"):null,n.a.createElement("table",{className:"table is-bordered"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Name"),n.a.createElement("th",null,"Value",n.a.createElement(f,{current_trend:e.market_trend})),n.a.createElement("th",null,"History"),n.a.createElement("th",null,"Updated At"))),n.a.createElement("tbody",null,Object.keys(e.stocks).map(function(t,a){var r=e.stocks[t];return n.a.createElement(b,{key:a,stock_name:t,stock_data:r,toggleStockSelection:e.toggleStockSelection})}),e.areStocksLoaded()?null:n.a.createElement("tr",null,n.a.createElement("td",{colSpan:"4"},"No stocks loaded yet!"))))))},v=a(68),E=(a(288),{responsive:!0,scales:{xAxes:[{type:"time",distribution:"linear",ticks:{source:"auto"},time:{displayFormats:{second:"h:mm:ss a"},unit:"second"},scaleLabel:{display:!0,labelString:"Time"}}],yAxes:[{ticks:{beginAtZero:!0,stepValue:10,steps:10},scaleLabel:{display:!0,labelString:"Price ($)"}}]},pan:{enabled:!0,mode:"x"},zoom:{enabled:!0,drag:!1,mode:"x"}}),y=["rgb(244, 67, 54)","rgb(76, 175, 80)","rgb(63, 81, 181)","rgb(255, 152, 0)","rgb(33, 150, 243)","rgb(139, 195, 74)","rgb(255, 87, 34)","rgb(121, 85, 72)","rgb(233, 30, 99)","rgb(205, 220, 57)","rgb(156, 39, 176)","rgb(255, 235, 59)","rgb(158, 158, 158)","rgb(103, 58, 183)","rgb(0, 150, 136)","rgb(255, 193, 7)","rgb(96, 125, 139)","rgb(33, 33, 33)","rgb(169, 4, 4)","rgb(1, 74, 64)","rgb(179, 3, 72)","rgb(84, 58, 68)"],S=function(e,t,a){return{label:e.toUpperCase(),fill:!1,lineTension:0,backgroundColor:t,borderColor:t,borderCapStyle:"butt",borderJoinStyle:"miter",pointBorderColor:t,pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:t,pointHoverBorderColor:t,pointHoverBorderWidth:2,pointRadius:3,pointHitRadius:10,data:a}},w=function(e){function t(){var e,a;Object(o.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(n)))).updateChart=function(){var e=a.refs.chart.chartInstance;if(0===Object.keys(a.props.stocks).length)return e.data.datasets=[],e.update();Object.keys(a.props.stocks).map(function(t,r){var n=a.props.stocks[t],s=e.data.datasets.find(function(e){return e.label===t.toUpperCase()});if(n.is_selected){var c=a.props.stocks[t];s?s.data=a.getStockValues(c):c&&(e.data.datasets=e.data.datasets.concat([S(t,y[r],a.getStockValues(c))]))}else s&&e.data.datasets.splice(e.data.datasets.indexOf(s),1);e.update()})},a.componentDidUpdate=function(){a.updateChart()},a.getStockValues=function(e){return e.history.map(function(e){return{t:new Date(e.time),y:e.value}})},a.resetZoom=function(){a.refs.chart.chartInstance.resetZoom()},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"card column"},n.a.createElement("div",{className:"card-header"},n.a.createElement("div",{className:"card-header-title"},"Graph")),n.a.createElement("div",{className:"card-content"},n.a.createElement("p",{className:"is-size-7 has-text-info"},this.refs.chart&&this.refs.chart.chartInstance.data.datasets.length>0?"Scroll/pinch to zoom, drag to pan.":"Click on any stocks on your left to see graphs."),n.a.createElement("button",{className:"button is-small is-pulled-right",onClick:this.resetZoom},"Reset zoom"),n.a.createElement(v.a,{data:{datasets:[]},options:E,ref:"chart"})))}}]),t}(n.a.Component),N=function(e){return n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"card-header"},n.a.createElement("div",{className:"card-header-icon"},n.a.createElement("span",{className:"loader"})),n.a.createElement("div",{className:"card-header-title"},"Loading...")),n.a.createElement("div",{className:"card"},n.a.createElement("div",{className:"card-content"},"You need to click on \xa0",n.a.createElement("code",null,"Load Unsafe Scripts"),"\xa0 to proceed.",n.a.createElement("br",null)," Look for the \xa0",n.a.createElement("code",null,"shield icon"),"\xa0 on your browser's addreess bar.  \u21e7",n.a.createElement("br",null),n.a.createElement("br",null),"(Trust me, it's just an app which shows some simulated share market data :p)")))},O="ws://stocks.mnet.website/",_=function(e){function t(){var e,a;Object(o.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(n)))).state={stocks:{},market_trend:void 0,show_spinner:!0},a.componentDidMount=function(){a.connection=new WebSocket(O),a.connection.onmessage=a.saveNewStockValues},a.saveNewStockValues=function(e){a.setState({show_spinner:!1});var t=JSON.parse(e.data),r=0,n=0,s=Date.now(),c=a.state.stocks;t.map(function(e){a.state.stocks[e[0]]?(c[e[0]].current_value>Number(e[1])?r++:n++,c[e[0]].current_value=Number(e[1]),c[e[0]].history.push({time:s,value:Number(e[1])})):c[e[0]]={current_value:e[1],history:[{time:Date.now(),value:Number(e[1])}],is_selected:!1}}),a.setState({stocks:c,market_trend:a.newMarketTrend(r,n)})},a.newMarketTrend=function(e,t){if(e!==t)return e>t?"up":"down"},a.toggleStockSelection=function(e){var t=a.state.stocks;t[e].is_selected=!t[e].is_selected,a.setState({stocks:t})},a.resetData=function(){var e=a.state.stocks;Object.keys(a.state.stocks).map(function(t,a){e[t].history=[e[t].history.pop()]}),a.setState({stocks:e})},a.areStocksLoaded=function(){return Object.keys(a.state.stocks).length>0},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return this.state.show_spinner?n.a.createElement(N,null):n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"columns"},n.a.createElement(g,{stocks:this.state.stocks,toggleStockSelection:this.toggleStockSelection,resetData:this.resetData,market_trend:this.state.market_trend,areStocksLoaded:this.areStocksLoaded}),n.a.createElement(w,{stocks:this.state.stocks})))}}]),t}(n.a.Component),j=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"App"},n.a.createElement(_,null))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(n.a.createElement(j,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},70:function(e,t,a){e.exports=a(290)},75:function(e,t,a){},77:function(e,t,a){}},[[70,2,1]]]);
//# sourceMappingURL=main.c5680855.chunk.js.map
(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{290:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(65),o=a.n(s),c=(a(75),a(6)),l=a(7),i=a(9),d=a(8),u=a(10),m=(a(77),a(79),a(66)),p=a(41),h=a(67),k=a.n(h),b=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).getStockValueColor=function(e){return e.current_value<e.history.slice(-2)[0].value?"red":e.current_value>e.history.slice(-2)[0].value?"green":null},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.stock_data.history;return r.a.createElement("tr",{className:this.props.stock_data.is_selected?"selected":null,id:this.props.stock_name,onClick:this.props.toggleStockSelection.bind(this,this.props.stock_name)},r.a.createElement("td",null,this.props.stock_name.toUpperCase()),r.a.createElement("td",{className:this.getStockValueColor(this.props.stock_data)},this.props.stock_data.current_value.toFixed(2)),r.a.createElement("td",null,r.a.createElement(p.Sparklines,{data:e.map(function(e){return e.value})},r.a.createElement(p.SparklinesLine,{color:"blue"}))),r.a.createElement("td",{className:"updated_at"},r.a.createElement(k.a,{date:e.slice(-1)[0].time})))}}]),t}(r.a.Component),f=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(s)))).getArrow=function(){return"up"===a.props.current_trend?r.a.createElement("span",{className:"up-arrow"},"\u21e7"):"down"===a.props.current_trend?r.a.createElement("span",{className:"down-arrow"},"\u21e9"):"-"},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("span",{title:"Market trend",className:"icon market-trend"},this.getArrow())}}]),t}(r.a.Component),g=function(e){return r.a.createElement("div",{className:"card column is-one-third",id:"stocks_list"},r.a.createElement("div",{className:"card-header"},r.a.createElement("div",{className:"card-header-title"},"Stocks \xa0",r.a.createElement(m.Detector,{render:function(e){var t=e.online;return r.a.createElement("span",{className:t?"tag is-success":"tag is-danger"},t?"Live":"Offline")}}),"\xa0",r.a.createElement("button",{className:"button is-small",onClick:e.resetData},"Clear history"))),r.a.createElement("div",{className:"card-content"},e.areStocksLoaded()?r.a.createElement("p",{className:"is-size-7 has-text-info"},"Click on a stock to select/unselect"):null,r.a.createElement("table",{className:"table is-bordered"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Value",r.a.createElement(f,{current_trend:e.market_trend})),r.a.createElement("th",null,"History"),r.a.createElement("th",null,"Updated At"))),r.a.createElement("tbody",null,Object.keys(e.stocks).map(function(t,a){var n=e.stocks[t];return r.a.createElement(b,{key:a,stock_name:t,stock_data:n,toggleStockSelection:e.toggleStockSelection})}),e.areStocksLoaded()?null:r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"4"},"No stocks loaded yet!"))))))},v=a(68),E=(a(288),{responsive:!0,scales:{xAxes:[{type:"time",distribution:"linear",ticks:{source:"auto"},time:{displayFormats:{second:"h:mm:ss a"},unit:"second"},scaleLabel:{display:!0,labelString:"Time"}}],yAxes:[{ticks:{beginAtZero:!0,stepValue:10,steps:10},scaleLabel:{display:!0,labelString:"Price ($)"}}]},pan:{enabled:!0,mode:"x"},zoom:{enabled:!0,drag:!1,mode:"x"}}),y=["rgb(244, 67, 54)","rgb(76, 175, 80)","rgb(63, 81, 181)","rgb(255, 152, 0)","rgb(33, 150, 243)","rgb(139, 195, 74)","rgb(255, 87, 34)","rgb(121, 85, 72)","rgb(233, 30, 99)","rgb(205, 220, 57)","rgb(156, 39, 176)","rgb(255, 235, 59)","rgb(158, 158, 158)","rgb(103, 58, 183)","rgb(0, 150, 136)","rgb(255, 193, 7)","rgb(96, 125, 139)","rgb(33, 33, 33)","rgb(169, 4, 4)","rgb(1, 74, 64)","rgb(179, 3, 72)","rgb(84, 58, 68)"],S=function(e,t,a){return{label:e.toUpperCase(),fill:!1,lineTension:0,backgroundColor:t,borderColor:t,borderCapStyle:"butt",borderJoinStyle:"miter",pointBorderColor:t,pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:t,pointHoverBorderColor:t,pointHoverBorderWidth:2,pointRadius:3,pointHitRadius:10,data:a}},w=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).updateChart=function(){var e=a.refs.chart.chartInstance;if(0===Object.keys(a.props.stocks).length)return e.data.datasets=[],e.update();Object.keys(a.props.stocks).map(function(t,n){var r=a.props.stocks[t],s=e.data.datasets.find(function(e){return e.label===t.toUpperCase()});if(r.is_selected){var o=a.props.stocks[t];s?s.data=a.getStockValues(o):o&&(e.data.datasets=e.data.datasets.concat([S(t,y[n],a.getStockValues(o))]))}else s&&e.data.datasets.splice(e.data.datasets.indexOf(s),1);e.update()})},a.componentDidUpdate=function(){a.updateChart()},a.getStockValues=function(e){return e.history.map(function(e){return{t:new Date(e.time),y:e.value}})},a.resetZoom=function(){a.refs.chart.chartInstance.resetZoom()},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"card column"},r.a.createElement("div",{className:"card-header"},r.a.createElement("div",{className:"card-header-title"},"Graph")),r.a.createElement("div",{className:"card-content"},r.a.createElement("p",{className:"is-size-7 has-text-info"},this.refs.chart&&this.refs.chart.chartInstance.data.datasets.length>0?"Scroll/pinch to zoom, drag to pan.":"Click on any stocks on your left to see graphs."),r.a.createElement("button",{className:"button is-small is-pulled-right",onClick:this.resetZoom},"Reset zoom"),r.a.createElement(v.a,{data:{datasets:[]},options:E,ref:"chart"})))}}]),t}(r.a.Component),N=function(e){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"card-header"},r.a.createElement("div",{className:"card-header-icon"},r.a.createElement("span",{className:"loader"})),r.a.createElement("div",{className:"card-header-title"},"Loading...")),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content"},"You need to click on \xa0",r.a.createElement("code",null,"Load Unsafe Scripts"),"\xa0 to proceed.",r.a.createElement("br",null)," Look for the \xa0",r.a.createElement("code",null,"shield icon"),"\xa0 on your browser's addreess bar.  \u21e7",r.a.createElement("br",null),r.a.createElement("br",null),"(Trust me, it's just an app which shows some simulated share market data :p)")))},O="ws://stocks.mnet.website/",_=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={stocks:{},market_trend:void 0,show_spinner:!0},a.componentDidMount=function(){a.connection=new WebSocket(O),a.connection.onmessage=a.saveNewStockValues,a.connection.onerror=function(){console.log("error")},a.connection.onclose=function(){console.log("close")}},a.saveNewStockValues=function(e){a.setState({show_spinner:!1});var t=JSON.parse(e.data),n=0,r=0,s=Date.now(),o=a.state.stocks;t.map(function(e){a.state.stocks[e[0]]?(o[e[0]].current_value>Number(e[1])?n++:r++,o[e[0]].current_value=Number(e[1]),o[e[0]].history.push({time:s,value:Number(e[1])})):o[e[0]]={current_value:e[1],history:[{time:Date.now(),value:Number(e[1])}],is_selected:!1}}),a.setState({stocks:o,market_trend:a.newMarketTrend(n,r)})},a.newMarketTrend=function(e,t){if(e!==t)return e>t?"up":"down"},a.toggleStockSelection=function(e){var t=a.state.stocks;t[e].is_selected=!t[e].is_selected,a.setState({stocks:t})},a.resetData=function(){var e=a.state.stocks;Object.keys(a.state.stocks).map(function(t,a){e[t].history=[e[t].history.pop()]}),a.setState({stocks:e})},a.areStocksLoaded=function(){return Object.keys(a.state.stocks).length>0},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return this.state.show_spinner?r.a.createElement(N,null):r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"columns"},r.a.createElement(g,{stocks:this.state.stocks,toggleStockSelection:this.toggleStockSelection,resetData:this.resetData,market_trend:this.state.market_trend,areStocksLoaded:this.areStocksLoaded}),r.a.createElement(w,{stocks:this.state.stocks})))}}]),t}(r.a.Component),j=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(_,null))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(j,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},70:function(e,t,a){e.exports=a(290)},75:function(e,t,a){},77:function(e,t,a){}},[[70,2,1]]]);
//# sourceMappingURL=main.dbf2e940.chunk.js.map